<html>
<head>
<title>[ @array ] - a dynamic reference to an array</title>
<link rel="StyleSheet" href="./../style.css" type="text/css">
</head>
<body>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./backslash.html" class="nav">Previous</a></td>
<td>
<a href="./curly_brackets.html" class="nav">Next</a></td>
</tr>
</table>

<h1 class="fcs">10.3 [ @array ] - a dynamic reference to an array</h1>

<p>
An array surrounded by square brackets (<tt>[ @array ]</tt>) returns a dynamic 
reference to an array. This reference does not affect other values directly, which is
why it is called dynamic.
</p>

<p>
We have already encountered such dynamic array references in the Hanoi 
example. But there use is not limited to such. Since a reference to an array
is a scalar, it can serve as a hash value and therefore serve as an object 
member. (as we'll be seen later in the series).
</p>

<p>
In this example, a function is given two arrays, and returns an array that
is the element-wise sum of both of them:
</p>


<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52929>use strict</FONT></B>;

<B><FONT color=#a52929>sub</FONT></B><FONT color=#008c8c> </FONT><FONT color=#008c8c>vector_sum</FONT>
{
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$v1_ref</FONT> = <B><FONT color=#a52929>shift</FONT></B>;
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$v2_ref</FONT> = <B><FONT color=#a52929>shift</FONT></B>;

    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@ret</FONT>;

    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@v1</FONT> = @{<FONT color=#008c8c>$v1_ref</FONT>};
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@v2</FONT> = @{<FONT color=#008c8c>$v2_ref</FONT>};

    <B><FONT color=#a52929>if</FONT></B> (<B><FONT color=#a52929>scalar</FONT></B>(<FONT color=#008c8c>@v1</FONT>) != <B><FONT color=#a52929>scalar</FONT></B>(<FONT color=#008c8c>@v2</FONT>))
    {
        <B><FONT color=#a52929>return</FONT></B> <B><FONT color=#a52929>undef</FONT></B>;
    }
    <B><FONT color=#a52929>for</FONT></B>(<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$i</FONT>=<FONT color=#ff00ff>0</FONT>;<FONT color=#008c8c>$i</FONT>&lt;<B><FONT color=#a52929>scalar</FONT></B>(<FONT color=#008c8c>@v1</FONT>);<FONT color=#008c8c>$i</FONT>++)
    {
        <B><FONT color=#a52929>push</FONT></B> <FONT color=#008c8c>@ret</FONT>, (<FONT color=#008c8c>$v1</FONT>[<FONT color=#008c8c>$i</FONT>] + <FONT color=#008c8c>$v2</FONT>[<FONT color=#008c8c>$i</FONT>]);
    }

    <B><FONT color=#a52929>return</FONT></B> [ <FONT color=#008c8c>@ret</FONT> ];    
}

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$ret</FONT> = vector_sum(
    [ <FONT color=#ff00ff>5</FONT>, <FONT color=#ff00ff>9</FONT>, <FONT color=#ff00ff>24</FONT>, <FONT color=#ff00ff>30</FONT> ],
    [ <FONT color=#ff00ff>8</FONT>, <FONT color=#ff00ff>2</FONT>, <FONT color=#ff00ff>10</FONT>, <FONT color=#ff00ff>20</FONT> ]
);

<B><FONT color=#a52929>print</FONT></B> <B><FONT color=#a52929>join</FONT></B>(<FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>, </FONT><FONT color=#ff00ff>&quot;</FONT>, @{<FONT color=#008c8c>$ret</FONT>}), <FONT color=#ff00ff>&quot;</FONT><FONT color=#6b5ace>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
</pre>
</td>
</tr>
</table>
</p>

<p>
<table class="note">
<tr class="note">
<td class="note">

<h3 class="note">Note</h3>

<p>
The fundamental difference between using <tt>\@myarray</tt> on an existing
variable named <tt>@myarray</tt> to using <tt>[ @myarray ]</tt> is this: the latter
forms creates a dynamic copy of <tt>@myarray</tt> and if this copy changes,
<tt>@myarray</tt> will not change with it. On the other hands, changes made to
a reference generated by backslash, will affect the original variable.
</p>

<p>
Note that if the members of <tt>@myarray</tt> are themselves references, then
the second form will not make a copy of them. Thus, they can be modified too,
even in the second form.
</td>
</tr>
</table>
</p>




<hr>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./backslash.html" class="nav">Previous</a></td>
<td>
<a href="./curly_brackets.html" class="nav">Next</a></td>
</tr>
</table>

</body>
</html>


