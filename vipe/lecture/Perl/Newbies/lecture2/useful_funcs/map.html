<html>
<head>
<title>map</title>
<link rel="StyleSheet" href="./../style.css" type="text/css">
</head>
<body>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./split.html" class="nav">Previous</a></td>
<td>
<a href="./sort/" class="nav">Next</a></td>
</tr>
</table>

<h1 class="fcs">9.2 map</h1>

<p>
The map function traverses an array and maps each element to one or more (
or zero) elements in a new array. It has a rather unorthodox syntax in that
it is written as 
<tt>@new_array = (map { &lt;Some Expression with $_&gt; } @array)</tt>
.
</p>

<p>
For each element of the array @array, the variable <tt>$_</tt> is assigned its
value, and within the curly brackets one can put an expression that is dependant 
on it.
</p>

<p>
The following examples multiplies each element of an array by two:
</p>


<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52929>use strict</FONT></B>;

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@array</FONT> = (<FONT color=#ff00ff>20</FONT>, <FONT color=#ff00ff>3</FONT>, <FONT color=#ff00ff>1</FONT>, <FONT color=#ff00ff>9</FONT>, <FONT color=#ff00ff>100</FONT>, <FONT color=#ff00ff>88</FONT>, <FONT color=#ff00ff>75</FONT>);

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@new_array</FONT> = (<B><FONT color=#a52929>map</FONT></B> { <FONT color=#008c8c>$_</FONT>*<FONT color=#ff00ff>2</FONT>; } <FONT color=#008c8c>@array</FONT>);

<B><FONT color=#a52929>print</FONT></B> <B><FONT color=#a52929>join</FONT></B>(<FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>,</FONT><FONT color=#ff00ff>&quot;</FONT>, <FONT color=#008c8c>@new_array</FONT>), <FONT color=#ff00ff>&quot;</FONT><FONT color=#6b5ace>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
</pre>
</td>
</tr>
</table>
</p>

<p>
Using map is usually faster than using a 
<tt>foreach $elem (@array) { ... push @new_array, $new_elem; }</tt> 
loop, at least when function performed is a relatively uncomplex one.
</p>

<p>
The following program decodes a run-length encoding compression, in which each
element of the array is a number followed by its number of times:
</p>


<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52929>use strict</FONT></B>;

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$default_input_string</FONT> = <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>2-5,3-9,1-2,8-1,4-7,5-9,20-3,16-9</FONT><FONT color=#ff00ff>&quot;</FONT>;

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$input_string</FONT> = <B><FONT color=#a52929>shift</FONT></B> || <FONT color=#008c8c>$default_input_string</FONT>;

<FONT color=#0000ff># RLE stands for Run-Length Encoding</FONT>
<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@rle_components</FONT> = <B><FONT color=#a52929>split</FONT></B>(<B><FONT color=#a52929>/</FONT></B><FONT color=#ff00ff>,</FONT><B><FONT color=#a52929>/</FONT></B>, <FONT color=#008c8c>$input_string</FONT>);
<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@expanded_sequence</FONT> = (<B><FONT color=#a52929>map</FONT></B> 
    { 
        <B><FONT color=#a52929>my</FONT></B> (<FONT color=#008c8c>$what</FONT>, <FONT color=#008c8c>$times</FONT>) = <B><FONT color=#a52929>split</FONT></B>(<B><FONT color=#a52929>/</FONT></B><FONT color=#ff00ff>-</FONT><B><FONT color=#a52929>/</FONT></B>, <FONT color=#008c8c>$_</FONT>);
        ((<FONT color=#008c8c>$what</FONT>) x <FONT color=#008c8c>$times</FONT>);
    }
    <FONT color=#008c8c>@rle_components</FONT>
    );

<B><FONT color=#a52929>print</FONT></B> <B><FONT color=#a52929>join</FONT></B>(<FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>,</FONT><FONT color=#ff00ff>&quot;</FONT>, <FONT color=#008c8c>@expanded_sequence</FONT>), <FONT color=#ff00ff>&quot;</FONT><FONT color=#6b5ace>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
</pre>
</td>
</tr>
</table>
</p>

<p>
As you can see, the expression at the end of the map iterator can be an
array with more than one element. It can also be an empty array, which means 
that some elements can be filtered out.
</p>



<hr>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./split.html" class="nav">Previous</a></td>
<td>
<a href="./sort/" class="nav">Next</a></td>
</tr>
</table>

</body>
</html>


