<html>
<head>
<title>Calling a Function by its Reference</title>
<link rel="StyleSheet" href="./../style.css" type="text/css">
</head>
<body>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./taking.html" class="nav">Previous</a></td>
<td>
<a href="./dynamic/" class="nav">Next</a></td>
</tr>
</table>

<h1 class="fcs">2.2 Calling a Function by its Reference</h1>

<p>
Assuming the reference of a function is stored in the variable <tt>$myref</tt>,
there are two methods to call the function from it:
</p>

<p>
<ol>
<li>
<tt>&amp;{$myref}(@args)</tt>
</li>
<li>
<tt>$myref-&gt;(@args)</tt>
</li>
</ol>
</p>

<p>
<tt>$myref</tt> can be as complex an expression as you would like, 
but you'll usually need parenthesis in the second notation.
</p>

<p>
Here's an example to illustrate it:
</p>


<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<FONT color=#a020f0>#!/usr/bin/perl</FONT>

<B><FONT color=#a52a2a>use strict</FONT></B>;

<FONT color=#0000ff># This is a value that can be inputted or outputted by the </FONT>
<FONT color=#0000ff># mini-interpreter.</FONT>
<B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$a_value</FONT>;

<B><FONT color=#a52a2a>sub</FONT></B><FONT color=#008b8b> </FONT><FONT color=#008b8b>do_print</FONT>
{
    <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#6a5acd>\$</FONT><FONT color=#ff00ff>a_value is </FONT><FONT color=#ff00ff>&quot;</FONT> . <FONT color=#008b8b>$a_value</FONT> . <FONT color=#ff00ff>&quot;</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;    
}

<B><FONT color=#a52a2a>sub</FONT></B><FONT color=#008b8b> </FONT><FONT color=#008b8b>do_input</FONT>
{
    <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>Please enter the new value:</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
    <B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$line</FONT> = &lt;&gt;;
    <B><FONT color=#a52a2a>chomp</FONT></B>(<FONT color=#008b8b>$line</FONT>);
    <FONT color=#008b8b>$a_value</FONT> = <FONT color=#008b8b>$line</FONT>;    
}

<B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$quit_program</FONT> = <FONT color=#ff00ff>0</FONT>;

<B><FONT color=#a52a2a>sub</FONT></B><FONT color=#008b8b> </FONT><FONT color=#008b8b>do_exit</FONT>
{
    <FONT color=#008b8b>$quit_program</FONT> = <FONT color=#ff00ff>1</FONT>;
}

<B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>%operations</FONT> = 
    (
        <FONT color=#ff00ff>'</FONT><FONT color=#ff00ff>print</FONT><FONT color=#ff00ff>'</FONT> =&gt; <FONT color=#008b8b>\&amp;do_print</FONT>,
        <FONT color=#ff00ff>'</FONT><FONT color=#ff00ff>input</FONT><FONT color=#ff00ff>'</FONT> =&gt; <FONT color=#008b8b>\&amp;do_input</FONT>,
        <FONT color=#ff00ff>'</FONT><FONT color=#ff00ff>exit</FONT><FONT color=#ff00ff>'</FONT> =&gt; <FONT color=#008b8b>\&amp;do_exit</FONT>,
    );

<B><FONT color=#a52a2a>sub</FONT></B><FONT color=#008b8b> </FONT><FONT color=#008b8b>get_operation</FONT>
{
    <B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$op</FONT> = <FONT color=#ff00ff>&quot;&quot;</FONT>;
    <B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$line</FONT>;
    <B><FONT color=#a52a2a>while</FONT></B> (<FONT color=#ff00ff>1</FONT>)
    {  
        <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>Please enter the operation (print, input, exit):</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
        <FONT color=#008b8b>$line</FONT> = &lt;&gt;;
        <B><FONT color=#a52a2a>chomp</FONT></B>(<FONT color=#008b8b>$line</FONT>);
        <B><FONT color=#a52a2a>if</FONT></B> (<B><FONT color=#a52a2a>exists</FONT></B>(<FONT color=#008b8b>$operations</FONT>{<FONT color=#008b8b>$line</FONT>}))
        {
            <B><FONT color=#a52a2a>last</FONT></B>;
        }
        <B><FONT color=#a52a2a>else</FONT></B>
        {
            <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>Unknown operation!</FONT><FONT color=#6a5acd>\n\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
        }
    }

    <B><FONT color=#a52a2a>return</FONT></B> <FONT color=#008b8b>$line</FONT>;
}

<B><FONT color=#a52a2a>while</FONT></B> (! <FONT color=#008b8b>$quit_program</FONT>)
{
    <B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$op</FONT> = get_operation();

    <B><FONT color=#a52a2a>my</FONT></B> <FONT color=#008b8b>$operation_ref</FONT> = <FONT color=#008b8b>$operations</FONT>{<FONT color=#008b8b>$op</FONT>};

    <FONT color=#008b8b>$operation_ref</FONT>-&gt;();
}
</pre>
</td>
</tr>
</table>
</p>



<hr>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./taking.html" class="nav">Previous</a></td>
<td>
<a href="./dynamic/" class="nav">Next</a></td>
</tr>
</table>

</body>
</html>


