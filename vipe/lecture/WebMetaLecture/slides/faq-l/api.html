<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="StyleSheet" href="../style.css" type="text/css" />
<title>
api.wml - the code
</title>
</head>
<body>
<table summary="">
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./questions.html" class="nav">Previous</a></td>
<td>
<a href="./index_answers.html" class="nav">Next</a></td>
</tr>
</table>
<h1>
8.2 api.wml - the code
</h1>
<p>
<table class="mycode" summary="">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
&lt;:&#123;
<font color="#008b8b">use</font> <font color="#008b8b">vars</font> <font color="#008b8b">qw</font>(<font color="#008b8b">@question_number</font>);

<font color="#008b8b">@question_number</font>=(<font color="#ff00ff">0</font>);
&#125;:&gt;

&#059;&#059;&#059; Perl code here:
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b"> next-question&gt;</font>&lt;:&#123;
    <font color="#a52a2a"><b>my</b></font> <font color="#008b8b">&#036;temp</font> = <font color="#a52a2a"><b>pop</b></font>(<font color="#008b8b">@question_number</font>)<font color="#ff00ff">+1</font>;
    <font color="#a52a2a"><b>push</b></font> <font color="#008b8b">@question_number</font>, <font color="#008b8b">&#036;temp</font>;
    <font color="#a52a2a"><b>my</b></font> <font color="#008b8b">&#036;qn_text</font> = <font color="#a52a2a"><b>join</b></font>(<font color="#ff00ff">&quot;</font><font color="#ff00ff">.</font><font color="#ff00ff">&quot;</font>, <font color="#008b8b">@question_number</font>);
    <font color="#a52a2a"><b>print</b></font> <font color="#008b8b">&#036;qn_text</font>;
&#125;:&gt;<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b">&gt;</font>

&#059;&#059;&#059; Perl code here:
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b"> promote&gt;</font>&lt;:&#123;
    <font color="#a52a2a"><b>push</b></font> <font color="#008b8b">@question_number</font>, <font color="#ff00ff">0</font>;
    <font color="#a52a2a"><b>my</b></font> <font color="#008b8b">&#036;qn_text</font> = <font color="#a52a2a"><b>join</b></font>(<font color="#ff00ff">&quot;</font><font color="#ff00ff">.</font><font color="#ff00ff">&quot;</font>, <font color="#008b8b">@question_number</font>);
&#125;:&gt;<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b">&gt;</font>

&#059;&#059;&#059; Perl code here:
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b"> demote&gt;</font>&lt;:&#123;
    <font color="#a52a2a"><b>pop</b></font>(<font color="#008b8b">@question_number</font>);
    <font color="#a52a2a"><b>my</b></font> <font color="#008b8b">&#036;qn_text</font> = <font color="#a52a2a"><b>join</b></font>(<font color="#ff00ff">&quot;</font><font color="#ff00ff">.</font><font color="#ff00ff">&quot;</font>, <font color="#008b8b">@question_number</font>);
&#125;:&gt;<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b">&gt;</font>



<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b"> question endtag=</font><font color="#ff00ff">&quot;required&quot;</font><font color="#008b8b">&gt;</font>
&#059;&#059;&#059; Define anchor to be the first argument
<font color="#008b8b">&lt;</font>preserve<font color="#008b8b"> anchor /&gt;</font>
&#059;&#059;&#059; Define title to be the second argument
<font color="#008b8b">&lt;</font>preserve<font color="#008b8b"> title /&gt;</font>

&#059;&#059;&#059; This statement is required to actually set
&#059;&#059;&#059; anchor and title to a proper value
<font color="#008b8b">&lt;</font>set-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> %attributes /&gt;</font>

&#059;&#059;&#059; next-question is defined above
<font color="#008b8b">&lt;</font>set-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> question-number=</font><font color="#ff00ff">&quot;&lt;next-question /&gt;&quot;</font><font color="#008b8b"> /&gt;</font>

<font color="#008b8b">&lt;</font>if<font color="#008b8b"> </font><span style="background-color: #ff0000"><font color="#ffffff">&lt;</font></span><font color="#008b8b">get-var render-body /&gt;</font>
&#059;&#059;&#059; If the question should be rendered.
    &quot;<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>a</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>name</b></font><font color="#008b8b">=</font><font color="#ff00ff">&quot;&lt;get-var anchor /&gt;&quot;</font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>a</b></font><font color="#008b8b">&gt;</font>
        <font color="#008b8b">&lt;</font><font color="#a52a2a"><b>p</b></font><font color="#008b8b">&gt;&lt;</font><font color="#a52a2a"><b>b</b></font><font color="#008b8b">&gt;&lt;</font>get-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> question-number /&gt;</font>. <font color="#008b8b">&lt;</font>get-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> title /&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>b</b></font><font color="#008b8b">&gt;&lt;/</font><font color="#a52a2a"><b>p</b></font><font color="#008b8b">&gt;</font>
        %body
        &quot;
&#059;&#059;&#059; If not
    &quot;<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>a</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>href</b></font><font color="#008b8b">=</font><font color="#ff00ff">&quot;answers.html#&lt;get-var anchor /&gt;&quot;</font><font color="#008b8b">&gt;&lt;</font>get-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> question-number /&gt;</font>. <font color="#008b8b">&lt;</font>get-<font color="#a52a2a"><b>var</b></font><font color="#008b8b"> title /&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>a</b></font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;</font><font color="#a52a2a"><b>br</b></font><font color="#008b8b"> /&gt;</font>&quot;
    /<span style="background-color: #ff0000"><font color="#ffffff">&gt;</font></span>
&#059;&#059;&#059; Restore their previous values
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>restore</b></font><font color="#008b8b"> title /&gt;</font>
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>restore</b></font><font color="#008b8b"> anchor /&gt;</font>
<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>define-tag</b></font><font color="#008b8b">&gt;</font>
</pre>
</td>
</tr>
</table>
</p>
<hr />
<table summary="">
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./questions.html" class="nav">Previous</a></td>
<td>
<a href="./index_answers.html" class="nav">Next</a></td>
</tr>
</table>
</body>
</html>
