<html>
<head>
<link rel="StyleSheet" href="../style.css" type="text/css">
<title>
The configure.in file
</title>
</head>
<body>
<table summary="">
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./Makefile.am.html" class="nav">Previous</a></td>
<td>
<a href="./../common_macros/" class="nav">Next</a></td>
</tr>
</table>
<h1>
3.2 The configure.in file
</h1>
<table class="mycode" summary="">
<tr class="mycode">
<td class="mycode">
<pre>
<font color="#0000ff">dnl Process this file with autoconf to produce a configure script.</font>

<font color="#0000ff">dnl AC_INIT is the first macro that should be called in an Autoconf</font>
<font color="#0000ff">dnl script. It should be called with one argument that exhibits one</font>
<font color="#0000ff">dnl of the source files</font>
<font color="#008b8b">AC_INIT</font><font color="#6a5acd">(</font>rwlock.c<font color="#6a5acd">)</font>

<font color="#0000ff">dnl Initialize Automake</font>
<font color="#0000ff">dnl The first paramater is the project name</font>
<font color="#0000ff">dnl The second is the version</font>
<font color="#008b8b">AM_INIT_AUTOMAKE</font><font color="#6a5acd">(</font>pthread_rwlock_fcfs<font color="#6a5acd">,</font> <font color="#ff00ff">0.4</font>.<font color="#ff00ff">0</font><font color="#6a5acd">)</font>

<font color="#0000ff">dnl Initialize libtool</font>
<font color="#008b8b">AM_PROG_LIBTOOL</font>

<font color="#0000ff">dnl Checks for programs.</font>
<font color="#008b8b">AC_PROG_CC</font>


<font color="#0000ff">dnl Checks for libraries.</font>
<font color="#008b8b">AC_CHECK_LIB</font><font color="#6a5acd">(</font>pthread<font color="#6a5acd">,</font> pthread_create<font color="#6a5acd">)</font>

<font color="#0000ff">dnl Checks for header files.</font>
<font color="#008b8b">AC_HEADER_STDC</font>
<font color="#008b8b">AC_CHECK_HEADERS</font><font color="#6a5acd">(</font>sys/time.h unistd.h<font color="#6a5acd">)</font>

<font color="#0000ff">dnl Set the debug flag to no by default</font>
debug_rwlock<font color="#a52a2a"><b>=</b></font>no

<font color="#0000ff">dnl Set a command line option to set it otherwise</font>
<font color="#008b8b">AC_ARG_ENABLE</font><font color="#6a5acd">(</font>debug-rwlock<font color="#6a5acd">,</font>
 <font color="#6a5acd">[</font>  --enable-debug-rwlock  Enable an RWLock that prints debug notices on the screen. This is a debugging feature which should not be usually enabled<font color="#6a5acd">],</font>
 <font color="#6a5acd">[</font> debug_rwlock<font color="#a52a2a"><b>=</b></font>yes
 <font color="#6a5acd">])</font>

<font color="#0000ff">dnl If debug_rwlock is set</font>
<font color="#a52a2a"><b>if</b></font> <font color="#a52a2a"><b>test</b></font> <font color="#ff00ff">&quot;x$debug_rwlock&quot;</font> <font color="#a52a2a"><b>=</b></font> <font color="#ff00ff">&quot;xyes&quot;</font> <font color="#6a5acd">;</font> <font color="#a52a2a"><b>then</b></font>
    <font color="#0000ff">dnl Define the macro PTHREAD_RWLOCK_FCFS_DEBUG</font>
    <font color="#008b8b">AC_DEFINE</font><font color="#6a5acd">(</font><font color="#008b8b">PTHREAD_RWLOCK_FCFS_DEBUG</font><font color="#6a5acd">)</font>
<font color="#a52a2a"><b>fi</b></font>

<font color="#0000ff">dnl Checks for typedefs, structures, and compiler characteristics.</font>
<font color="#008b8b">AC_C_CONST</font>
<font color="#008b8b">AC_HEADER_TIME</font>

<font color="#0000ff">dnl Checks for library functions.</font>
<font color="#008b8b">AC_CHECK_FUNCS</font><font color="#6a5acd">(</font>gettimeofday<font color="#6a5acd">)</font>

<font color="#0000ff">dnl Output the files</font>
<font color="#008b8b">AC_OUTPUT</font><font color="#6a5acd">([</font>Makefile man/Makefile<font color="#6a5acd">])</font>

</pre>
</td>
</tr>
</table>
<hr>
<table summary="">
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./Makefile.am.html" class="nav">Previous</a></td>
<td>
<a href="./../common_macros/" class="nav">Next</a></td>
</tr>
</table>
</body>
</html>
