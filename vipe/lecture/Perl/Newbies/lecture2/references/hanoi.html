<html>
<head>
<title>Example: The Towers of Hanoi</title>
<link rel="StyleSheet" href="./../style.css" type="text/css">
</head>
<body>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./" class="nav">Previous</a></td>
<td>
<a href="./backslash.html" class="nav">Next</a></td>
</tr>
</table>

<h1 class="fcs">10.1 Example: The Towers of Hanoi</h1>

<p>
In this example, which is intended to give a taste of the capabilities of
references, we will solve the well-known Towers of Hanoi problem. The number
of disks can be inputted from the command-line. The towers themselves will
be represented as an array of three elements, each of which is a reference
to an array.
</p>

<p>
Here goes:
</p>


<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52929>use strict</FONT></B>;

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$num_disks</FONT> = <B><FONT color=#a52929>shift</FONT></B> || <FONT color=#ff00ff>9</FONT>;

<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>@towers</FONT> = (
    [ <B><FONT color=#a52929>reverse</FONT></B>(<FONT color=#ff00ff>1</FONT> .. <FONT color=#008c8c>$num_disks</FONT>) ],  <FONT color=#0000ff># A [ ... ] is a dynamic reference to </FONT>
    [ ],                           <FONT color=#0000ff># an array</FONT>
    [ ]
    );

<B><FONT color=#a52929>sub</FONT></B><FONT color=#008c8c> </FONT><FONT color=#008c8c>print_towers</FONT>
{
    <B><FONT color=#a52929>for</FONT></B>(<B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$a</FONT>=<FONT color=#ff00ff>0</FONT>;<FONT color=#008c8c>$a</FONT>&lt;<FONT color=#ff00ff>3</FONT>;<FONT color=#008c8c>$a</FONT>++)
    {
        <B><FONT color=#a52929>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>: </FONT><FONT color=#ff00ff>&quot;</FONT>;
        <B><FONT color=#a52929>print</FONT></B> <B><FONT color=#a52929>join</FONT></B>(<FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff> </FONT><FONT color=#ff00ff>&quot;</FONT>, @{<FONT color=#008c8c>$towers</FONT>[<FONT color=#008c8c>$a</FONT>]}); <FONT color=#0000ff># We de-reference the tower</FONT>
        <B><FONT color=#a52929>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#6b5ace>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
    }
    <B><FONT color=#a52929>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#6b5ace>\n\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
}

<B><FONT color=#a52929>sub</FONT></B><FONT color=#008c8c> </FONT><FONT color=#008c8c>move_column</FONT>
{
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$source</FONT> = <B><FONT color=#a52929>shift</FONT></B>;
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$dest</FONT> = <B><FONT color=#a52929>shift</FONT></B>;
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$how_many</FONT> = <B><FONT color=#a52929>shift</FONT></B>;

    <B><FONT color=#a52929>if</FONT></B> (<FONT color=#008c8c>$how_many</FONT> == <FONT color=#ff00ff>0</FONT>)
    {
        <B><FONT color=#a52929>return</FONT></B>;
    }
    <FONT color=#0000ff># Find the third column </FONT>
    <B><FONT color=#a52929>my</FONT></B> <FONT color=#008c8c>$intermediate</FONT> = <FONT color=#ff00ff>0</FONT>+<FONT color=#ff00ff>1</FONT>+<FONT color=#ff00ff>2</FONT>-<FONT color=#008c8c>$source</FONT>-<FONT color=#008c8c>$dest</FONT>;
    move_column(<FONT color=#008c8c>$source</FONT>, <FONT color=#008c8c>$intermediate</FONT>, <FONT color=#008c8c>$how_many</FONT><FONT color=#ff00ff>-1</FONT>);
    <FONT color=#0000ff># Print the current state</FONT>
    print_towers();
    <FONT color=#0000ff># Move one disk. Notice the dereferncing of the arrays</FONT>
    <FONT color=#0000ff># using @{$ref}.</FONT>
    <B><FONT color=#a52929>push</FONT></B> @{<FONT color=#008c8c>$towers</FONT>[<FONT color=#008c8c>$dest</FONT>]}, <B><FONT color=#a52929>pop</FONT></B>(@{<FONT color=#008c8c>$towers</FONT>[<FONT color=#008c8c>$source</FONT>]});
    move_column(<FONT color=#008c8c>$intermediate</FONT>, <FONT color=#008c8c>$dest</FONT>, <FONT color=#008c8c>$how_many</FONT><FONT color=#ff00ff>-1</FONT>);
}

<FONT color=#0000ff># Move the entire column</FONT>
move_column(<FONT color=#ff00ff>0</FONT>,<FONT color=#ff00ff>1</FONT>,<FONT color=#008c8c>$num_disks</FONT>);
print_towers();
</pre>
</td>
</tr>
</table>
</p>




<hr>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./" class="nav">Previous</a></td>
<td>
<a href="./backslash.html" class="nav">Next</a></td>
</tr>
</table>

</body>
</html>


