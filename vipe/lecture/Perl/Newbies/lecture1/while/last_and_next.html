<html>
<head>
<title>last and next</title>
<link rel="StyleSheet" href="./../style.css" type="text/css">
</head>
<body>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./" class="nav">Previous</a></td>
<td>
<a href="./../arrays/" class="nav">Next</a></td>
</tr>
</table>

<h1 class="fcs">8.1 last and next</h1>

<p>
Within the <tt>while</tt> and <tt>for</tt> loops one can use two special commands,
called <tt>last</tt> and <tt>next</tt>. <tt>last</tt> terminates a loop 
prematurely while <tt>next</tt> skips the rest of the remaining loop body, 
skips to the loop condition and if it is met, executes the loop again.
</p>

<p>
By default, <tt>last</tt> and <tt>next</tt> operate on the most innermost loop.
However, the loop to which they relate can be controlled by labeling 
the requested loop and specifiying this label as a parameter to <tt>last</tt>
or <tt>next</tt>.
</p>

<p>
The following example is a rewrite of the "All A's" program using 
<tt>last</tt>:
</p>

<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>Please enter a string:</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
<FONT color=#008b8b>$string</FONT>=&lt;&gt;;
<B><FONT color=#a52a2a>chomp</FONT></B>(<FONT color=#008b8b>$string</FONT>);

<FONT color=#0000ff># The first position in the string.</FONT>
<FONT color=#008b8b>$position</FONT> = <FONT color=#ff00ff>0</FONT>;

<B><FONT color=#a52a2a>while</FONT></B> (<FONT color=#008b8b>$position</FONT> &lt; <B><FONT color=#a52a2a>length</FONT></B>(<FONT color=#008b8b>$string</FONT>))
{
    <FONT color=#008b8b>$char</FONT> = <B><FONT color=#a52a2a>lc</FONT></B>(<B><FONT color=#a52a2a>substr</FONT></B>(<FONT color=#008b8b>$string</FONT>, <FONT color=#008b8b>$position</FONT>, <FONT color=#ff00ff>1</FONT>));
    
    <B><FONT color=#a52a2a>if</FONT></B> (<FONT color=#008b8b>$char</FONT> <B><FONT color=#a52a2a>ne</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>a</FONT><FONT color=#ff00ff>&quot;</FONT>)
    {
        <B><FONT color=#a52a2a>last</FONT></B>;
    }
    
    <FONT color=#0000ff># Increment the position</FONT>
    <FONT color=#008b8b>$position</FONT>++;
}

<FONT color=#0000ff># If the position is the end of the string it means the loop was not</FONT>
<FONT color=#0000ff># terminated prematurally, so an &quot;a&quot; was not encountered.</FONT>
<B><FONT color=#a52a2a>if</FONT></B> (<FONT color=#008b8b>$position</FONT> == <B><FONT color=#a52a2a>length</FONT></B>(<FONT color=#008b8b>$string</FONT>))
{
    <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>The string you entered is all A's!</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
}
<B><FONT color=#a52a2a>else</FONT></B>
{
    <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>At least one of the characters in the string </FONT><FONT color=#ff00ff>&quot;</FONT> . 
        <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>you entered is not </FONT><FONT color=#6a5acd>\&quot;</FONT><FONT color=#ff00ff>A</FONT><FONT color=#6a5acd>\&quot;</FONT><FONT color=#ff00ff>.</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
}
</pre>
</td>
</tr>
</table>


</p>

<hr>

<p>This program prints a left-tilted pyramide:</p>

<p>
<table class="mycode">
<tr class="mycode">
<td class="mycode">
<pre class="mycode">
<B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>Please enter the length of the pyramide:</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
<FONT color=#008b8b>$size</FONT> = &lt;&gt;;
<B><FONT color=#a52a2a>chomp</FONT></B>(<FONT color=#008b8b>$size</FONT>);

ROW_LOOP: <B><FONT color=#a52a2a>for</FONT></B> <FONT color=#008b8b>$row</FONT> (<FONT color=#ff00ff>1</FONT> .. <FONT color=#008b8b>$size</FONT>)
{
    <B><FONT color=#a52a2a>for</FONT></B> <FONT color=#008b8b>$column</FONT> (<FONT color=#ff00ff>1</FONT> .. (<FONT color=#008b8b>$size</FONT>+<FONT color=#ff00ff>1</FONT>))
    {
        <B><FONT color=#a52a2a>if</FONT></B> (<FONT color=#008b8b>$column</FONT> &gt; <FONT color=#008b8b>$row</FONT>)
        {
            <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>&quot;</FONT>;
            <B><FONT color=#a52a2a>next</FONT></B> ROW_LOOP;
        }
        <B><FONT color=#a52a2a>print</FONT></B> <FONT color=#ff00ff>&quot;</FONT><FONT color=#ff00ff>#</FONT><FONT color=#ff00ff>&quot;</FONT>;
    }
}
</pre>
</td>
</tr>
</table>


</p>

<p>
"ROW_LOOP" is the label for the outer loop, and it can be seen that 
<tt>next</tt> uses it as a parameter. All in all, <tt>next</tt> and 
<tt>last</tt> are sometimes very convenient (but don't tell it to Edsgar W. 
Dijkstra's face!), so you will see them being used often.
</p>



<hr>
<table>
<tr>
<td>
<a href="./../" class="nav">Contents</a></td>
<td>
<a href="./" class="nav">Up</a></td>
<td>
<a href="./" class="nav">Previous</a></td>
<td>
<a href="./../arrays/" class="nav">Next</a></td>
</tr>
</table>

</body>
</html>


